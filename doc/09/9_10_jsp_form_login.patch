Index: src/main/webapp/test.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/webapp/test.html	(revision )
+++ src/main/webapp/test.html	(revision )
@@ -0,0 +1,13 @@
+<html>
+<link rel="stylesheet" href="resources/css/style.css">
+<link rel="stylesheet" href="webjars/bootstrap/3.3.7-1/css/bootstrap.min.css">
+<link rel="shortcut icon" href="resources/images/icon-meal.png">
+<body>
+<hr/>
+<ul>
+    <li><a href="users">User list</a></li>
+    <li><a href="meals">Meal list</a></li>
+</ul>
+<hr/>
+</body>
+</html>
\ No newline at end of file
Index: src/main/webapp/WEB-INF/jsp/login.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/webapp/WEB-INF/jsp/login.jsp	(revision )
+++ src/main/webapp/WEB-INF/jsp/login.jsp	(revision )
@@ -0,0 +1,80 @@
+<%@ page contentType="text/html;charset=UTF-8" language="java" %>
+<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
+
+<html>
+<jsp:include page="fragments/headTag.jsp"/>
+<body>
+<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
+    <div class="container">
+        <div class="navbar-header navbar-brand"><fmt:message key="app.title"/></div>
+        <div class="navbar-collapse collapse">
+            <form class="navbar-form navbar-right" role="form" action="spring_security_check" method="post">
+                <div class="form-group">
+                    <input type="text" placeholder="Email" class="form-control" name='username'>
+                </div>
+                <div class="form-group">
+                    <input type="password" placeholder="Password" class="form-control" name='password'>
+                </div>
+                <button type="submit" class="btn btn-success"><fmt:message key="app.login"/></button>
+            </form>
+        </div>
+    </div>
+</div>
+
+<div class="jumbotron">
+    <div class="container">
+        <c:if test="${error}">
+            <div class="error">
+                    ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
+            </div>
+        </c:if>
+        <c:if test="${not empty message}">
+            <div class="message">
+                <fmt:message key="${message}"/>
+            </div>
+        </c:if>
+        <p>
+
+        <p>User login: <b>user@yandex.ru / password</b></p>
+
+        <p>Admin login: <b>admin@gmail.com / admin</b></p>
+
+        <p>Стек технологий: <a href="http://projects.spring.io/spring-security/">Spring Security</a>,
+            <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html">Spring MVC</a>,
+            <a href="http://projects.spring.io/spring-data-jpa/">Spring Data JPA</a>,
+            <a href="http://spring.io/blog/2014/05/07/preview-spring-security-test-method-security">Spring Security
+                Test</a>,
+            <a href="http://hibernate.org/orm/">Hibernate ORM</a>,
+            <a href="http://hibernate.org/validator/">Hibernate Validator</a>,
+            <a href="http://www.slf4j.org/">SLF4J</a>,
+            <a href="https://github.com/FasterXML/jackson">Json Jackson</a>,
+            <a href="http://ru.wikipedia.org/wiki/JSP">JSP</a>,
+            <a href="http://en.wikipedia.org/wiki/JavaServer_Pages_Standard_Tag_Library">JSTL</a>,
+            <a href="http://tomcat.apache.org/">Apache Tomcat</a>,
+            <a href="http://www.webjars.org/">WebJars</a>,
+            <a href="http://datatables.net/">DataTables plugin</a>,
+            <a href="http://ehcache.org">Ehcache</a>,
+            <a href="http://www.postgresql.org/">PostgreSQL</a>,
+            <a href="http://junit.org/">JUnit</a>,
+            <a href="http://hamcrest.org/JavaHamcrest/">Hamcrest</a>,
+            <a href="http://jquery.com/">jQuery</a>,
+            <a href="http://ned.im/noty/">jQuery notification</a>,
+            <a href="http://getbootstrap.com/">Bootstrap</a>.</p>
+    </div>
+</div>
+<div class="container">
+    <div class="lead">
+        &nbsp;&nbsp;&nbsp;<a href="https://github.com/JavaOPs/topjava">Java Enterprise проект</a> с
+        регистрацией/авторизацией и интерфейсом на основе ролей (USER, ADMIN).
+        Администратор может создавать/редактировать/удалять/пользователей, а пользователь - управлять своим
+        профилем и данными (день, еда, калории) через UI (по AJAX) и по REST интерфейсу с базовой авторизацией.
+        Возможна фильтрация данных по датам и времени, при этом цвет записи таблицы еды зависит от того, превышает ли
+        сумма
+        калорий за день норму (редактируемый параметр в профиле пользователя).
+        Весь REST интерфейс покрывается JUnit тестами, используя Spring MVC Test и Spring Security Test.
+    </div>
+</div>
+<jsp:include page="fragments/footer.jsp"/>
+</body>
+</html>
\ No newline at end of file
Index: config/messages/app.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- config/messages/app.properties	(date 1477910157000)
+++ config/messages/app.properties	(revision )
@@ -1,7 +1,7 @@
 app.title=Calories management
 app.home=Home
 app.footer=Project <a href\="https\://github.com/JavaOPs/topjava" target\=_blank>Maven/ Spring/ Security/ JPA(Hibernate)/ Jackson/jQuery</a> application
-app.login=Login as
+app.login=Login
 app.logout=Logout
 
 users.title=User list
\ No newline at end of file
Index: src/main/webapp/WEB-INF/jsp/index.jsp
===================================================================
--- src/main/webapp/WEB-INF/jsp/index.jsp	(date 1477910157000)
+++ src/main/webapp/WEB-INF/jsp/index.jsp	(date 1477910157000)
@@ -1,28 +0,0 @@
-<%@ page contentType="text/html;charset=UTF-8" language="java" %>
-<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
-<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
-
-<html>
-<jsp:include page="fragments/headTag.jsp"/>
-<body>
-<jsp:include page="fragments/bodyHeader.jsp"/>
-<div class="jumbotron">
-    <div class="container">
-        <p/>
-
-        <form method="post" action="users">
-            <fmt:message key="app.login"/>: <select name="userId">
-            <option value="100000" selected>User</option>
-            <option value="100001">Admin</option>
-        </select>
-            <button type="submit"><fmt:message key="common.select"/></button>
-        </form>
-        <ul>
-            <li><a href="users"><fmt:message key="users.title"/></a></li>
-            <li><a href="meals"><fmt:message key="meals.title"/></a></li>
-        </ul>
-    </div>
-</div>
-<jsp:include page="fragments/footer.jsp"/>
-</body>
-</html>
Index: src/main/webapp/resources/css/style.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/webapp/resources/css/style.css	(date 1477910157000)
+++ src/main/webapp/resources/css/style.css	(revision )
@@ -9,3 +9,22 @@
 .footer {
     padding-bottom: 15px;
 }
+
+.error, .message {
+    padding: 10px;
+    margin-bottom: 20px;
+    border-radius: 4px;
+    font-size: 16px;
+}
+
+.error {
+    color: #a94442;
+    background-color: #f2dede;
+    border: 1px solid #ebccd1;
+}
+
+.message {
+    color: #2f9635;
+    background-color: #c6fbc2;
+    border: 1px solid #9feba6;
+}
\ No newline at end of file
Index: src/main/resources/spring/spring-security.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/spring/spring-security.xml	(date 1477910157000)
+++ src/main/resources/spring/spring-security.xml	(revision )
@@ -17,10 +17,15 @@
     </http>
 
     <http>
+        <intercept-url pattern="/login" access="permitAll"/>
+
         <intercept-url pattern="/**/admin/**" access="hasRole('ROLE_ADMIN')"/>
         <intercept-url pattern="/**" access="isAuthenticated()"/>
-        <form-login/>
-        <logout/>
+
+        <form-login login-page="/login" default-target-url="/meals"
+                    authentication-failure-url="/login?error=true"
+                    login-processing-url="/spring_security_check"/>
+        <logout logout-success-url="/login"/>
         <csrf disabled="true"/>
     </http>
 
\ No newline at end of file
Index: src/main/java/ru/javawebinar/topjava/web/RootController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/web/RootController.java	(date 1477910157000)
+++ src/main/java/ru/javawebinar/topjava/web/RootController.java	(revision )
@@ -3,14 +3,15 @@
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Controller;
 import org.springframework.ui.Model;
+import org.springframework.ui.ModelMap;
 import org.springframework.web.bind.annotation.GetMapping;
-import org.springframework.web.bind.annotation.PostMapping;
+import org.springframework.web.bind.annotation.RequestMapping;
+import org.springframework.web.bind.annotation.RequestMethod;
+import org.springframework.web.bind.annotation.RequestParam;
 import ru.javawebinar.topjava.AuthorizedUser;
 import ru.javawebinar.topjava.service.MealService;
 import ru.javawebinar.topjava.util.MealsUtil;
 
-import javax.servlet.http.HttpServletRequest;
-
 /**
  * User: gkislin
  * Date: 22.08.2014
@@ -23,7 +24,7 @@
 
     @GetMapping("/")
     public String root() {
-        return "index";
+        return "redirect:meals";
     }
 
     @GetMapping("/users")
@@ -31,11 +32,13 @@
         return "users";
     }
 
-    @PostMapping("/users")
-    public String setUser(HttpServletRequest request) {
-        int userId = Integer.valueOf(request.getParameter("userId"));
-        AuthorizedUser.setId(userId);
-        return "redirect:meals";
+    @RequestMapping(value = "/login", method = RequestMethod.GET)
+    public String login(ModelMap model,
+                        @RequestParam(value = "error", required = false) boolean error,
+                        @RequestParam(value = "message", required = false) String message) {
+        model.put("error", error);
+        model.put("message", message);
+        return "login";
     }
 
     @GetMapping("/meals")
Index: src/main/resources/spring/spring-mvc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/spring/spring-mvc.xml	(date 1477910157000)
+++ src/main/resources/spring/spring-mvc.xml	(revision )
@@ -1,11 +1,14 @@
-<beans xmlns="http://www.springframework.org/schema/beans"
-       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
-       xmlns:p="http://www.springframework.org/schema/p" xmlns:mvc="http://www.springframework.org/schema/mvc"
+       xmlns:p="http://www.springframework.org/schema/p"
+       xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns="http://www.springframework.org/schema/beans"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">
 
     <bean class="ru.javawebinar.topjava.web.json.JacksonObjectMapper" id="objectMapper" factory-method="getMapper"/>
+
+    <!-- serve static resources (*.html, ...) from src/main/webapp/ -->
+    <mvc:default-servlet-handler/>
 
     <mvc:annotation-driven conversion-service="conversionService">
         <mvc:message-converters>
\ No newline at end of file
Index: config/messages/app_ru.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- config/messages/app_ru.properties	(date 1477910157000)
+++ config/messages/app_ru.properties	(revision )
@@ -1,7 +1,7 @@
 app.title=Подсчет калорий
 app.home=Главная
 app.footer=Приложение по проекту <a href="https://github.com/JavaOPs/topjava" target=_blank>Maven/ Spring/ Security/ JPA(Hibernate)/ Jackson/jQuery</a>
-app.login=Зайти как
+app.login=Войти
 app.logout=Выйти
 
 users.title=Список пользователей
\ No newline at end of file
