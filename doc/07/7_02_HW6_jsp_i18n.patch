Index: config/messages/app.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- config/messages/app.properties	(date 1476648390000)
+++ config/messages/app.properties	(revision )
@@ -4,7 +4,26 @@
 app.login=Login as
 
 users.title=User list
+users.name=Name
+users.email=Email
+users.roles=Roles
+users.active=Active
+users.registered=Registered
 
 meals.title=Meals list
+meals.edit=Edit meal
+meals.add=Add meal
+meals.filter=Filter
+meals.startDate=From date
+meals.endDate=To date
+meals.startTime=From time
+meals.endTime=To time
+meals.description=Description
+meals.dateTime=DateTime
+meals.calories=Calories
 
 common.select=Select
+common.delete=Delete
+common.update=Update
+common.save=Save
+common.cancel=Cancel
Index: src/main/webapp/WEB-INF/jsp/meals.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/webapp/WEB-INF/jsp/meals.jsp	(date 1476648390000)
+++ src/main/webapp/WEB-INF/jsp/meals.jsp	(revision )
@@ -3,42 +3,40 @@
 <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
 <%@ taglib prefix="fn" uri="http://topjava.javawebinar.ru/functions" %>
 <html>
-<head>
-    <title>Meal list</title>
-    <link rel="stylesheet" href="css/style.css">
-</head>
+<jsp:include page="fragments/headTag.jsp"/>
 <body>
+<jsp:include page="fragments/bodyHeader.jsp"/>
 <section>
-    <h2><a href="${pageContext.request.contextPath}/">Home</a></h2>
-    <h3>Meal list</h3>
+    <h3><fmt:message key="meals.title"/></h3>
+
     <form method="post" action="meals?action=filter">
         <dl>
-            <dt>From Date:</dt>
+            <dt><fmt:message key="meals.startDate"/>:</dt>
             <dd><input type="date" name="startDate" value="${startDate}"></dd>
         </dl>
         <dl>
-            <dt>To Date:</dt>
+            <dt><fmt:message key="meals.endDate"/>:</dt>
             <dd><input type="date" name="endDate" value="${endDate}"></dd>
         </dl>
         <dl>
-            <dt>From Time:</dt>
+            <dt><fmt:message key="meals.startTime"/>:</dt>
             <dd><input type="time" name="startTime" value="${startTime}"></dd>
         </dl>
         <dl>
-            <dt>To Time:</dt>
+            <dt><fmt:message key="meals.endTime"/>:</dt>
             <dd><input type="time" name="endTime" value="${endTime}"></dd>
         </dl>
-        <button type="submit">Filter</button>
+        <button type="submit"><fmt:message key="meals.filter"/></button>
     </form>
     <hr>
-    <a href="meals?action=create">Add Meal</a>
+    <a href="meals?action=create"><fmt:message key="meals.add"/></a>
     <hr>
     <table border="1" cellpadding="8" cellspacing="0">
         <thead>
         <tr>
-            <th>Date</th>
-            <th>Description</th>
-            <th>Calories</th>
+            <th><fmt:message key="meals.dateTime"/></th>
+            <th><fmt:message key="meals.description"/></th>
+            <th><fmt:message key="meals.calories"/></th>
             <th></th>
             <th></th>
         </tr>
@@ -53,11 +51,12 @@
                 </td>
                 <td>${meal.description}</td>
                 <td>${meal.calories}</td>
-                <td><a href="meals?action=update&id=${meal.id}">Update</a></td>
-                <td><a href="meals?action=delete&id=${meal.id}">Delete</a></td>
+                <td><a href="meals?action=update&id=${meal.id}"><fmt:message key="common.update"/></a></td>
+                <td><a href="meals?action=delete&id=${meal.id}"><fmt:message key="common.delete"/></a></td>
             </tr>
         </c:forEach>
     </table>
 </section>
+<jsp:include page="fragments/footer.jsp"/>
 </body>
 </html>
Index: src/main/java/ru/javawebinar/topjava/web/RootController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ru/javawebinar/topjava/web/RootController.java	(date 1476648390000)
+++ src/main/java/ru/javawebinar/topjava/web/RootController.java	(revision )
@@ -6,7 +6,9 @@
 import org.springframework.web.bind.annotation.RequestMapping;
 import org.springframework.web.bind.annotation.RequestMethod;
 import ru.javawebinar.topjava.AuthorizedUser;
+import ru.javawebinar.topjava.service.MealService;
 import ru.javawebinar.topjava.service.UserService;
+import ru.javawebinar.topjava.util.MealsUtil;
 
 import javax.servlet.http.HttpServletRequest;
 
@@ -17,8 +19,11 @@
 @Controller
 public class RootController {
     @Autowired
-    private UserService service;
+    private UserService userService;
 
+    @Autowired
+    private MealService mealService;
+
     @RequestMapping(value = "/", method = RequestMethod.GET)
     public String root() {
         return "index";
@@ -26,7 +31,7 @@
 
     @RequestMapping(value = "/users", method = RequestMethod.GET)
     public String users(Model model) {
-        model.addAttribute("users", service.getAll());
+        model.addAttribute("users", userService.getAll());
         return "users";
     }
 
@@ -35,5 +40,12 @@
         int userId = Integer.valueOf(request.getParameter("userId"));
         AuthorizedUser.setId(userId);
         return "redirect:meals";
+    }
+
+    @RequestMapping(value = "/meals", method = RequestMethod.GET)
+    public String meals(Model model) {
+        model.addAttribute("meals",
+                MealsUtil.getWithExceeded(mealService.getAll(AuthorizedUser.id()), AuthorizedUser.getCaloriesPerDay()));
+        return "meals";
     }
 }
Index: src/main/webapp/WEB-INF/jsp/meal.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/webapp/WEB-INF/jsp/meal.jsp	(date 1476648390000)
+++ src/main/webapp/WEB-INF/jsp/meal.jsp	(revision )
@@ -1,34 +1,32 @@
 <%@ page contentType="text/html;charset=UTF-8" language="java" %>
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
-
+<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
 <html>
-<head>
-    <title>Meal</title>
-    <link rel="stylesheet" href="css/style.css">
-</head>
+<jsp:include page="fragments/headTag.jsp"/>
 <body>
+<jsp:include page="fragments/bodyHeader.jsp"/>
 <section>
-    <h2><a href="index.html">Home</a></h2>
-    <h3>${param.action == 'create' ? 'Create meal' : 'Edit meal'}</h3>
+    <h3><fmt:message key="${meal.isNew() ? 'meals.add' : 'meals.edit'}"/></h3>
     <hr>
     <jsp:useBean id="meal" type="ru.javawebinar.topjava.model.Meal" scope="request"/>
     <form method="post" action="meals">
         <input type="hidden" name="id" value="${meal.id}">
         <dl>
-            <dt>DateTime:</dt>
+            <dt><fmt:message key="meals.dateTime"/>:</dt>
             <dd><input type="datetime-local" value="${meal.dateTime}" name="dateTime"></dd>
         </dl>
         <dl>
-            <dt>Description:</dt>
+            <dt><fmt:message key="meals.description"/>:</dt>
             <dd><input type="text" value="${meal.description}" size=40 name="description"></dd>
         </dl>
         <dl>
-            <dt>Calories:</dt>
+            <dt><fmt:message key="meals.calories"/>:</dt>
             <dd><input type="number" value="${meal.calories}" name="calories"></dd>
         </dl>
-        <button type="submit">Save</button>
-        <button onclick="window.history.back()">Cancel</button>
+        <button type="submit"><fmt:message key="common.save"/></button>
+        <button onclick="window.history.back()"><fmt:message key="common.cancel"/></button>
     </form>
 </section>
+<jsp:include page="fragments/footer.jsp"/>
 </body>
 </html>
Index: src/main/webapp/WEB-INF/jsp/users.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/webapp/WEB-INF/jsp/users.jsp	(date 1476648390000)
+++ src/main/webapp/WEB-INF/jsp/users.jsp	(revision )
@@ -8,17 +8,16 @@
 <jsp:include page="fragments/bodyHeader.jsp"/>
 
 <section>
-    <h2><a href="${pageContext.request.contextPath}/"><fmt:message key="app.home"/></a></h2>
     <h3><fmt:message key="users.title"/></h3>
 
     <table border="1" cellpadding="8" cellspacing="0">
         <thead>
         <tr>
-            <th>Name</th>
-            <th>Email</th>
-            <th>Roles</th>
-            <th>Active</th>
-            <th>Registered</th>
+            <th><fmt:message key="users.name"/></th>
+            <th><fmt:message key="users.email"/></th>
+            <th><fmt:message key="users.roles"/></th>
+            <th><fmt:message key="users.active"/></th>
+            <th><fmt:message key="users.registered"/></th>
         </tr>
         </thead>
         <c:forEach items="${users}" var="user">
Index: src/main/webapp/WEB-INF/jsp/fragments/bodyHeader.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/webapp/WEB-INF/jsp/fragments/bodyHeader.jsp	(date 1476648390000)
+++ src/main/webapp/WEB-INF/jsp/fragments/bodyHeader.jsp	(revision )
@@ -1,4 +1,4 @@
 <%@page contentType="text/html" pageEncoding="UTF-8" %>
 <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
 
-<header><a href="meals"><fmt:message key="app.title"/></a></header>
+<header><a href="${pageContext.request.contextPath}/"><fmt:message key="app.home"/></a>&nbsp;&nbsp;<a href="meals"><fmt:message key="app.title"/></a></header>
\ No newline at end of file
Index: config/messages/app_ru.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- config/messages/app_ru.properties	(date 1476648390000)
+++ config/messages/app_ru.properties	(revision )
@@ -4,7 +4,26 @@
 app.login=Зайти как
 
 users.title=Список пользователей
+users.name=Имя
+users.email=Почта
+users.roles=Роли
+users.active=Активный
+users.registered=Зарегистрирован
 
 meals.title=Список еды
+meals.edit=Редактировать еду
+meals.add=Добавить еду
+meals.filter=Отфильтровать
+meals.startDate=От даты
+meals.endDate=До даты
+meals.startTime=От времени
+meals.endTime=До времени
+meals.description=Описание
+meals.dateTime=Время
+meals.calories=Калории
 
-common.select=Выбрать
\ No newline at end of file
+common.select=Выбрать
+common.delete=Удалить
+common.update=Обновить
+common.save=Сохранить
+common.cancel=Отмена
\ No newline at end of file
